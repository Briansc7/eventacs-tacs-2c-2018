{"ast":null,"code":"/*\n  \n*/\nvar Refiner = require('./refiner').Refiner;\n\nvar TIMEZONE_OFFSET_PATTERN = new RegExp(\"^\\\\s*(GMT|UTC)?(\\\\+|\\\\-)(\\\\d{1,2}):?(\\\\d{2})\", 'i');\nvar TIMEZONE_OFFSET_SIGN_GROUP = 2;\nvar TIMEZONE_OFFSET_HOUR_OFFSET_GROUP = 3;\nvar TIMEZONE_OFFSET_MINUTE_OFFSET_GROUP = 4;\n\nexports.Refiner = function ExtractTimezoneOffsetRefiner() {\n  Refiner.call(this);\n\n  this.refine = function (text, results, opt) {\n    results.forEach(function (result) {\n      if (result.start.isCertain('timezoneOffset')) {\n        return;\n      }\n\n      var match = TIMEZONE_OFFSET_PATTERN.exec(text.substring(result.index + result.text.length));\n\n      if (!match) {\n        return;\n      }\n\n      var hourOffset = parseInt(match[TIMEZONE_OFFSET_HOUR_OFFSET_GROUP]);\n      var minuteOffset = parseInt(match[TIMEZONE_OFFSET_MINUTE_OFFSET_GROUP]);\n      var timezoneOffset = hourOffset * 60 + minuteOffset;\n\n      if (match[TIMEZONE_OFFSET_SIGN_GROUP] === '-') {\n        timezoneOffset = -timezoneOffset;\n      }\n\n      if (result.end != null) {\n        result.end.assign('timezoneOffset', timezoneOffset);\n      }\n\n      result.start.assign('timezoneOffset', timezoneOffset);\n      result.text += match[0];\n      result.tags['ExtractTimezoneOffsetRefiner'] = true;\n    });\n    return results;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}