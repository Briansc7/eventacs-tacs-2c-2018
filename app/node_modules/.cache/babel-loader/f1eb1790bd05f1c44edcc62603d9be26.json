{"ast":null,"code":"/*\n\n*/\nvar Refiner = require('./refiner').Refiner; // Map ABBR -> Offset in minute\n\n\nvar TIMEZONE_ABBR_MAP = {};\nvar TIMEZONE_NAME_PATTERN = new RegExp(\"^\\\\s*\\\\(?([A-Z]{2,4})\\\\)?(?=\\\\W|$)\", 'i');\n\nexports.Refiner = function ExtractTimezoneAbbrRefiner() {\n  Refiner.call(this);\n\n  this.refine = function (text, results, opt) {\n    results.forEach(function (result) {\n      if (!result.tags['ENTimeExpressionParser'] && !result.tags['ZHTimeExpressionParser'] && !result.tags['FRTimeExpressionParser'] && !result.tags['DETimeExpressionParser']) {\n        return;\n      }\n\n      var match = TIMEZONE_NAME_PATTERN.exec(text.substring(result.index + result.text.length));\n\n      if (match) {\n        var timezoneAbbr = match[1].toUpperCase();\n\n        if (TIMEZONE_ABBR_MAP[timezoneAbbr] === undefined) {\n          return;\n        }\n\n        var timezoneOffset = TIMEZONE_ABBR_MAP[timezoneAbbr];\n\n        if (!result.start.isCertain('timezoneOffset')) {\n          result.start.assign('timezoneOffset', timezoneOffset);\n        }\n\n        if (result.end != null && !result.end.isCertain('timezoneOffset')) {\n          result.end.assign('timezoneOffset', timezoneOffset);\n        }\n\n        result.text += match[0];\n        result.tags['ExtractTimezoneAbbrRefiner'] = true;\n      }\n    });\n    return results;\n  };\n}; // TODO: Move this to some configuration\n\n\nTIMEZONE_ABBR_MAP = {\n  \"ACDT\": 630,\n  \"ACST\": 570,\n  \"ADT\": -180,\n  \"AEDT\": 660,\n  \"AEST\": 600,\n  \"AFT\": 270,\n  \"AKDT\": -480,\n  \"AKST\": -540,\n  \"ALMT\": 360,\n  \"AMST\": -180,\n  \"AMT\": -240,\n  \"ANAST\": 720,\n  \"ANAT\": 720,\n  \"AQTT\": 300,\n  \"ART\": -180,\n  \"AST\": -240,\n  \"AWDT\": 540,\n  \"AWST\": 480,\n  \"AZOST\": 0,\n  \"AZOT\": -60,\n  \"AZST\": 300,\n  \"AZT\": 240,\n  \"BNT\": 480,\n  \"BOT\": -240,\n  \"BRST\": -120,\n  \"BRT\": -180,\n  \"BST\": 60,\n  \"BTT\": 360,\n  \"CAST\": 480,\n  \"CAT\": 120,\n  \"CCT\": 390,\n  \"CDT\": -300,\n  \"CEST\": 120,\n  \"CET\": 60,\n  \"CHADT\": 825,\n  \"CHAST\": 765,\n  \"CKT\": -600,\n  \"CLST\": -180,\n  \"CLT\": -240,\n  \"COT\": -300,\n  \"CST\": -360,\n  \"CVT\": -60,\n  \"CXT\": 420,\n  \"ChST\": 600,\n  \"DAVT\": 420,\n  \"EASST\": -300,\n  \"EAST\": -360,\n  \"EAT\": 180,\n  \"ECT\": -300,\n  \"EDT\": -240,\n  \"EEST\": 180,\n  \"EET\": 120,\n  \"EGST\": 0,\n  \"EGT\": -60,\n  \"EST\": -300,\n  \"ET\": -300,\n  \"FJST\": 780,\n  \"FJT\": 720,\n  \"FKST\": -180,\n  \"FKT\": -240,\n  \"FNT\": -120,\n  \"GALT\": -360,\n  \"GAMT\": -540,\n  \"GET\": 240,\n  \"GFT\": -180,\n  \"GILT\": 720,\n  \"GMT\": 0,\n  \"GST\": 240,\n  \"GYT\": -240,\n  \"HAA\": -180,\n  \"HAC\": -300,\n  \"HADT\": -540,\n  \"HAE\": -240,\n  \"HAP\": -420,\n  \"HAR\": -360,\n  \"HAST\": -600,\n  \"HAT\": -90,\n  \"HAY\": -480,\n  \"HKT\": 480,\n  \"HLV\": -210,\n  \"HNA\": -240,\n  \"HNC\": -360,\n  \"HNE\": -300,\n  \"HNP\": -480,\n  \"HNR\": -420,\n  \"HNT\": -150,\n  \"HNY\": -540,\n  \"HOVT\": 420,\n  \"ICT\": 420,\n  \"IDT\": 180,\n  \"IOT\": 360,\n  \"IRDT\": 270,\n  \"IRKST\": 540,\n  \"IRKT\": 540,\n  \"IRST\": 210,\n  \"IST\": 60,\n  \"JST\": 540,\n  \"KGT\": 360,\n  \"KRAST\": 480,\n  \"KRAT\": 480,\n  \"KST\": 540,\n  \"KUYT\": 240,\n  \"LHDT\": 660,\n  \"LHST\": 630,\n  \"LINT\": 840,\n  \"MAGST\": 720,\n  \"MAGT\": 720,\n  \"MART\": -510,\n  \"MAWT\": 300,\n  \"MDT\": -360,\n  \"MESZ\": 120,\n  \"MEZ\": 60,\n  \"MHT\": 720,\n  \"MMT\": 390,\n  \"MSD\": 240,\n  \"MSK\": 240,\n  \"MST\": -420,\n  \"MUT\": 240,\n  \"MVT\": 300,\n  \"MYT\": 480,\n  \"NCT\": 660,\n  \"NDT\": -90,\n  \"NFT\": 690,\n  \"NOVST\": 420,\n  \"NOVT\": 360,\n  \"NPT\": 345,\n  \"NST\": -150,\n  \"NUT\": -660,\n  \"NZDT\": 780,\n  \"NZST\": 720,\n  \"OMSST\": 420,\n  \"OMST\": 420,\n  \"PDT\": -420,\n  \"PET\": -300,\n  \"PETST\": 720,\n  \"PETT\": 720,\n  \"PGT\": 600,\n  \"PHOT\": 780,\n  \"PHT\": 480,\n  \"PKT\": 300,\n  \"PMDT\": -120,\n  \"PMST\": -180,\n  \"PONT\": 660,\n  \"PST\": -480,\n  \"PT\": -480,\n  \"PWT\": 540,\n  \"PYST\": -180,\n  \"PYT\": -240,\n  \"RET\": 240,\n  \"SAMT\": 240,\n  \"SAST\": 120,\n  \"SBT\": 660,\n  \"SCT\": 240,\n  \"SGT\": 480,\n  \"SRT\": -180,\n  \"SST\": -660,\n  \"TAHT\": -600,\n  \"TFT\": 300,\n  \"TJT\": 300,\n  \"TKT\": 780,\n  \"TLT\": 540,\n  \"TMT\": 300,\n  \"TVT\": 720,\n  \"ULAT\": 480,\n  \"UTC\": 0,\n  \"UYST\": -120,\n  \"UYT\": -180,\n  \"UZT\": 300,\n  \"VET\": -210,\n  \"VLAST\": 660,\n  \"VLAT\": 660,\n  \"VUT\": 660,\n  \"WAST\": 120,\n  \"WAT\": 60,\n  \"WEST\": 60,\n  \"WESZ\": 60,\n  \"WET\": 0,\n  \"WEZ\": 0,\n  \"WFT\": 720,\n  \"WGST\": -120,\n  \"WGT\": -180,\n  \"WIB\": 420,\n  \"WIT\": 540,\n  \"WITA\": 480,\n  \"WST\": 780,\n  \"WT\": 0,\n  \"YAKST\": 600,\n  \"YAKT\": 600,\n  \"YAPT\": 600,\n  \"YEKST\": 360,\n  \"YEKT\": 360\n};","map":null,"metadata":{},"sourceType":"script"}