{"ast":null,"code":"/*\n\n\n*/\nvar moment = require('moment');\n\nvar Parser = require('../parser').Parser;\n\nvar ParsedResult = require('../../result').ParsedResult;\n\nvar util = require('../../utils/ZH-Hant.js');\n\nvar PATTERN = new RegExp('(\\\\d{2,4}|[' + Object.keys(util.NUMBER).join('') + ']{2,4})?' + '(?:\\\\s*)' + '(?:年)?' + '(?:[\\\\s|,|，]*)' + '(\\\\d{1,2}|[' + Object.keys(util.NUMBER).join('') + ']{1,2})' + '(?:\\\\s*)' + '(?:月)' + '(?:\\\\s*)' + '(\\\\d{1,2}|[' + Object.keys(util.NUMBER).join('') + ']{1,2})?' + '(?:\\\\s*)' + '(?:日|號)?');\nvar YEAR_GROUP = 1;\nvar MONTH_GROUP = 2;\nvar DAY_GROUP = 3;\n\nexports.Parser = function ZHHantDateParser() {\n  Parser.apply(this, arguments);\n\n  this.pattern = function () {\n    return PATTERN;\n  };\n\n  this.extract = function (text, ref, match, opt) {\n    var startMoment = moment(ref);\n    var result = new ParsedResult({\n      text: match[0],\n      index: match.index,\n      ref: ref\n    }); //Month\n\n    var month = parseInt(match[MONTH_GROUP]);\n    if (isNaN(month)) month = util.zhStringToNumber(match[MONTH_GROUP]);\n    result.start.assign('month', month); //Day\n\n    if (match[DAY_GROUP]) {\n      var day = parseInt(match[DAY_GROUP]);\n      if (isNaN(day)) day = util.zhStringToNumber(match[DAY_GROUP]);\n      result.start.assign('day', day);\n    } else {\n      result.start.imply('day', startMoment.date());\n    } //Year\n\n\n    if (match[YEAR_GROUP]) {\n      var year = parseInt(match[YEAR_GROUP]);\n      if (isNaN(year)) year = util.zhStringToYear(match[YEAR_GROUP]);\n      result.start.assign('year', year);\n    } else {\n      result.start.imply('year', startMoment.year());\n    }\n\n    result.tags.ZHHantDateParser = true;\n    return result;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}