{"ast":null,"code":"/*\n\n\n*/\nvar moment = require('moment');\n\nvar Parser = require('../parser').Parser;\n\nvar ParsedResult = require('../../result').ParsedResult;\n\nvar updateParsedComponent = require('../EN/ENWeekdayParser').updateParsedComponent;\n\nvar util = require('../../utils/ZH-Hant.js');\n\nvar PATTERN = new RegExp('(上|今|下|這|呢)?' + '(?:個)?' + '(?:星期|禮拜)' + '(' + Object.keys(util.WEEKDAY_OFFSET).join('|') + ')');\nvar PREFIX_GROUP = 1;\nvar WEEKDAY_GROUP = 2;\n\nexports.Parser = function ZHHantWeekdayParser() {\n  Parser.apply(this, arguments);\n\n  this.pattern = function () {\n    return PATTERN;\n  };\n\n  this.extract = function (text, ref, match, opt) {\n    var index = match.index;\n    text = match[0];\n    var result = new ParsedResult({\n      index: index,\n      text: text,\n      ref: ref\n    });\n    var dayOfWeek = match[WEEKDAY_GROUP];\n    var offset = util.WEEKDAY_OFFSET[dayOfWeek];\n    if (offset === undefined) return null;\n    var modifier = null;\n    var prefix = match[PREFIX_GROUP];\n\n    if (prefix == '上') {\n      modifier = 'last';\n    } else if (prefix == '下') {\n      modifier = 'next';\n    } else if (prefix == '今' || prefix == '這' || prefix == '呢') {\n      modifier = 'this';\n    }\n\n    updateParsedComponent(result, ref, offset, modifier);\n    result.tags['ZHHantWeekdayParser'] = true;\n    return result;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}